# Claude Shop - 产品需求文档 (PRD)

## 📋 项目概述

### 产品名称
Claude Shop

### 产品定位
内部管理系统，用于管理AWS账号资源，提供Claude AI服务配额查看和账号销售管理功能。

### 目标用户
- **公开用户**: 需要查看可购买的拥有配额的AWS账号的客户
- **管理员**: 内部运营人员，负责账号管理和维护

## 🎯 产品目标

### 业务目标
- 提供透明的AWS账号的Claude配额信息展示
- 简化客户查询可购买账号流程,减少营业的交流成本
- 提升内部账号管理效率
- 确保账号信息的实时性和准确性

### 技术目标
- 构建稳定可靠的管理后台
- 实现自动化配额更新机制
- 提供完整的操作审计功能
- 确保数据安全和访问控制

## 👥 用户角色定义

### 公开用户 (Public Users)
- **定义**: 访问系统查看AWS账号信息的潜在客户
- **权限**: 只读访问，查看公开展示的账号信息
- **使用场景**: 浏览账号、筛选需求、联系购买

### 管理员 (Administrators)
- **定义**: 系统内部运营和维护人员
- **权限**: 完整的系统管理权限
- **使用场景**: 账号管理、配额更新、数据维护

## 🔧 功能需求详述

### 公开功能模块

#### 1. 账号浏览功能
**功能描述**: 展示所有可用的AWS账号及其Claude配额信息

**具体需求**:
- 以卡片形式展示账号列表
- 显示关键信息：账号名、账号ID、可用模型、配额数量
- 支持分页浏览，每页显示5-10个账号
- 响应式设计，适配桌面和移动端
- 账号卡片显示配额状态（高配/标准/低配）

**验收标准**:
- 页面加载时间 < 3秒
- 信息展示完整准确
- 移动端体验良好

#### 2. 筛选功能
**功能描述**: 提供多维度筛选条件，帮助用户快速找到符合需求的账号

**具体需求**:
- **模型类型筛选**: 支持按Claude模型版本筛选（Claude-3.5-Sonnet, Claude-3-Haiku, Claude-3-Opus等）
- **可用状态筛选**: 待售，已售出
- **配额筛选**: 高配，标准，低配
- **筛选状态保存**: 会话期间保持筛选条件

**验收标准**:
- 筛选结果实时更新
- 筛选条件清晰可见
- 支持筛选条件重置
- 无筛选结果时友好提示

#### 3. 详细信息查看
**功能描述**: 点击账号卡片查看完整的配额详情

**具体需求**:
- 弹窗或详情页展示完整信息
- 显示当前账号基本信息
- 显示所有可用模型,对应模型的配额（高配标准还是低配），并显示具体配额数据（RPM, TPM, TPD）

**验收标准**:
- 信息展示完整
- 页面交互流畅
- 数据实时准确
- 弹窗/详情页响应式适配

### 管理员功能模块

#### 1. 安全认证系统
**功能描述**: 基于JWT的管理员登录验证机制

**具体需求**:
- 用户名/密码登录
- JWT Token生成和验证
- Token自动刷新机制
- 登录失败锁定机制（连续5次失败锁定30分钟）
- 会话超时自动登出（24小时）
- 记住登录状态选项
- 安全的密码重置机制

**验收标准**:
- 登录安全可靠
- Token机制工作正常
- 防护措施有效
- 会话管理稳定

#### 2. 账号管理功能
**功能描述**: 完整的AWS账号生命周期管理

**具体需求**:
- **创建账号**: 添加新的AWS账号信息
  - 名称、访问密钥(Access Key)、私密密钥(Secret Key)、描述
  - 账号信息验证（连接测试）
  - 自动触发账号ID获取及配额获取
- **查看账号**: 表格形式展示所有账号
  - 支持搜索和排序
  - 配额状态快速查看
  - 账号连接状态显示
  - 单个账号手动更新
- **编辑账号**: 修改账号基本信息
  - 账号描述和备注编辑
  - 密匙一旦创建应无法更新
- **删除账号**: 安全删除（软删除，保留历史记录）
  - 删除确认机制
  - 关联数据处理

**验收标准**:
- CRUD操作稳定可靠
- 数据验证完整
- 操作提示清晰
- 敏感信息安全处理

#### 3. 配额刷新功能
**功能描述**: 自动或手动触发账号配额更新

**具体需求**:
- **手动刷新**: 单个或批量账号配额更新
- **错误处理**: 失败重试机制和错误日志
- **配额历史**: 保存配额变化历史记录

**验收标准**:
- 手动刷新功能正常
- 错误处理完善
- 历史记录完整

#### 4. 审计日志功能
**功能描述**: 记录所有管理员操作，确保可追溯性

**具体需求**:
- **操作记录**: 记录所有CRUD操作
- **认证记录**: 记录登录/登出行为
- **配额记录**: 记录配额刷新操作
- **日志内容**: 操作人、操作时间、操作类型、操作对象、操作结果、IP地址
- **查询功能**: 日志查询和多维度筛选
- **实时监控**: 异常操作实时告警

**验收标准**:
- 所有关键操作被记录
- 日志查询功能完善


### 前端技术栈
- Ruby on Rails 7.0+
- Tailwind CSS 3.0+

### 后端技术栈
- Ruby on Rails 7.0+
- MySQL 8.0
- JWT认证

### 部署要求
- Docker容器化部署


